#include <inttypes.h>

#define MOTOR_CONTROLLER_ADDR 0x40050000

typedef enum {false, true} bool;

void move(int leftFwd, int rightFwd) {
	uint32_t *addr = (uint32_t*)MOTOR_CONTROLLER_ADDR;
	uint32_t data = 0;

	data ^= rightFwd;
	data ^= leftFwd << 1;

	data ^= 90 << 2;
	data ^= 90 << 9;

	*addr = data;
}

int main()
{
	int count = 0;
	int fwd = 1;
	while( 1 )
	{
		if (count++ >= 4000000) {
			if (fwd)
				fwd = 0;
			else
				fwd = 1;
			count = 0;
		}
		move(fwd, fwd);
	}
}
