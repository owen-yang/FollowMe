#include <stdbool.h>
#include <inttypes.h>

#define MOTOR_CONTROLLER_ADDR 0x40050000


void move(bool leftFwd, bool rightFwd) {
	uint32_t *addr = (uint32_t*)MOTOR_CONTROLLER_ADDR;
	uint32_t data = 0;

	data ^= rightFwd;
	data ^= leftFwd << 1;

	data ^= 20 << 2;
	data ^= 20 << 9;

	*addr = data;
}

int main()
{
	int count = 0;
	bool fwd = true;
	while( 1 )
	{
		if (count++ < 1000) {
			fwd = !fwd;
		}
		move(fwd, fwd);
	}
}
